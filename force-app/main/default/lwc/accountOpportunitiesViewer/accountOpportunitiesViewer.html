<template>
  <lightning-card
    title="Opportunités du Compte"
    icon-name="standard:opportunity"
  >
    <!-- Modification de la class css : slds-max-large-size_xx-large -->
    <div class="slds-p-around_small">
      <div class="slds-m-bottom_small">
        <lightning-button
          label="Rafraîchir"
          onclick={handleRafraichir}
          variant="brand"
          disabled={isLoading} 
        ></lightning-button>
      </div>

           <template if:true={isLoading}>
            <lightning-spinner alternative-text="Chargement des opportunités..." size="medium"></lightning-spinner>
          </template>

      <!-- // replacer false par true ici -->
      <template if:true={opportunities}>
        <lightning-datatable
          data={opportunities}
          columns={columns}
          key-field="Id"
          >
          <!-- class="slds-box slds-theme_default" -->
        </lightning-datatable>
      </template>
      <template if:true={error}>
        <div
          class="slds-notify slds-notify_alert slds-theme_alert-texture slds-theme_error"
          role="contentinfo"
        >
          <span class="slds-assistive-text">Erreur</span>
          <!-- // Modification du texte par un texte dynamique avec {error} -->
          <h2>
            {error}
            <!-- Une erreur s'est produite lors du chargement des opportunités. -->
          </h2>
        </div>
      </template>
    </div>
  </lightning-card>
</template>